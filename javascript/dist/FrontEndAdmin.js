!function(t){function n(t){return t+(t.split("?")[1]?"&":"?")+"frontEndAdmin=true"}var i={editmode:!1,highlight:!1,width:"false",height:"false",y:"false",load:function(){var n=document.cookie.split(";");t.each(this,function(e,o){var a,s,d;if(!t.isFunction(o))for(a=e+"=",s=0;s<n.length;s++){for(d=n[s];" "===d.charAt(0);)d=d.substring(1,d.length);0===d.indexOf(a)&&(i[e]=d.substring(a.length,d.length))}})},save:function(){var n=new Date;n.setTime(n.getTime()+12096e5),t.each(this,function(i,e){t.isFunction(e)||(document.cookie=i+"="+e+"; expires="+n.toGMTString()+"; path=/")})}};i.load(),t(function(){var e=t("meta[name='x-cms-edit-link']").attr("content")||frontEndAdmin.editHref;"undefined"!=typeof window.jQuery.fn.button&&"function"==typeof window.jQuery.fn.button.noConflict&&(window.jQuery.fn.bootstrapBtn=window.jQuery.fn.button.noConflict()),t.entwine("ss.frontEndAdmin",function(t){t("div.admin-panel").entwine({OpenPosition:0,ClosedPosition:0,AdminBtn:t("<button>").addClass("btn btn-default").attr("id","adminToggle").text(frontEndAdmin.toggleLabel),AdminBtnWrap:t("<div>").addClass("admin-panel-toggle-wrap"),AdminFrame:t("<iframe>").attr("id","admin-frame").attr("src",n(frontEndAdmin.editHref)),AdminFrameWrap:t("<div>").addClass("admin-frame-wrap"),ToolsWrap:t("<div>").addClass("admin-tools-wrap ui-widget-header ui-corner-all"),ToolsEditMode:t("<input type='checkbox' />").data("settings-key","editmode").attr("id","admin-tools-editmode").addClass("admin-tools-editmode admin-tools-toggle saveable"),ToolsEditModeLabel:t("<label>"+frontEndAdmin.editModeLabel+"</label>").addClass("btn btn-default"),ToolsHighlight:t("<input type='checkbox'/>").data("settings-key","highlight").attr("id","admin-tools-highlight").addClass("admin-tools-highlight admin-tools-toggle saveable"),ToolsHighlightLabel:t("<label>"+frontEndAdmin.highlightLabel+"</label>").addClass("btn btn-default"),ToolsCMSLink:t("<a>"+frontEndAdmin.cmsLabelLink+"</a>").attr("href",e).attr("target","_blank").addClass("admin-tools-cmslink admin-tools-link btn btn-default"),onmatch:function(){if(!t("body").hasClass("cms-dialog")){var n=this;n.append(n.getToolsWrap().append(n.getToolsHighlightLabel().attr("for",n.getToolsHighlight().attr("id"))).append(n.getToolsHighlight()).append(n.getToolsCMSLink())),n.append(n.getAdminFrameWrap().append(n.getAdminFrame())).append(n.getAdminBtnWrap().append(n.getAdminBtn().css({width:"100%",marginBottom:"5px"})).append(n.getToolsEditModeLabel().attr("for",n.getToolsEditMode().attr("id"))).append(n.getToolsEditMode())),isNaN(i.y)||n.css({top:i.y+"px"}),isNaN(i.width)||n.getAdminFrameWrap().width(i.width),isNaN(i.height)||n.getAdminFrameWrap().height(i.height),n.calculatePositions().hide().removeClass("admin-menu-hide").css({left:n.getClosedPosition()}).fadeIn(function(){n.draggable({handle:n.getAdminBtnWrap().parent(),axis:"y",stop:function(){i.y=t(this).position().top,i.save()}}),n.getAdminFrameWrap().resizable({stop:function(){t("div.admin-panel").calculatePositions(),i.width=t(this).width(),i.height=t(this).height(),i.save()}})})}},toggleAdmin:function(n,i){var e=400,o=this,a=parseInt(o.position().left,10),s=a>=o.getOpenPosition()?o.getClosedPosition():o.getOpenPosition();"undefined"!=typeof n&&(s=n?o.getOpenPosition():o.getClosedPosition()),n=s===o.getOpenPosition(),setTimeout(function(){o.getAdminBtn().setIcon(n?frontEndAdmin.toggleIconOpen:frontEndAdmin.toggleIconClosed)},e/2),o.animate({left:s},e,"easeInBack",function(){t.isFunction(i)&&i.apply(o,n)})},calculatePositions:function(){return this.setOpenPosition(-(parseInt(this.css("padding-left"),10)+parseInt(this.css("margin-left"),10)-parseInt(this.css("padding-right"),10)/2)),this.setClosedPosition(-(this.outerWidth()+parseInt(this.css("margin-left"),10))),this}}),t("#adminToggle").entwine({onmatch:function(){this.button({icons:{secondary:frontEndAdmin.toggleIconClosed}})},onclick:function(){t("div.admin-panel").toggleAdmin()},setIcon:function(t){this.button({icons:{secondary:t}})}}),t(".admin-tools-editmode").entwine({onmatch:function(){this.button({icons:{primary:"ui-icon-pencil",secondary:"ui-icon-circle-close"}}),this._super()},onchange:function(){this._super(),t(".admin-tools-highlight").button("option","disabled",!this.prop("checked"))},onclick:function(){window.location.reload()}}),t(".admin-tools-highlight").entwine({onmatch:function(){this.button({icons:{primary:"ui-icon-circlesmall-minus",secondary:"ui-icon-circle-close"}}),this._super()},onchange:function(){this.prop("checked")?t("body").addClass("highlight-editable"):t("body").removeClass("highlight-editable"),this._super()}}),t(".admin-tools-toggle").entwine({onchange:function(){var t=this.button("option","icons");t.secondary=this.prop("checked")?"ui-icon-circle-check":"ui-icon-circle-close",this.button({icons:t}),this._super()}}),t(".admin-tools-cmslink").entwine({onmatch:function(){this.button({icons:{primary:"ui-icon-newwin"}})},onclick:function(){var n=t("div.admin-panel").getAdminFrame(),i=n.attr("src").replace(/[&\?]frontEndAdmin=true/g,""),e=this.attr("href").replace(/[&\?]frontEndAdmin=true/g,"");n[0]&&n[0].contentWindow&&(i=n[0].contentWindow.location.href.replace(/[&\?]frontEndAdmin=true/g,"")),e!==i&&this.attr("href",i)}}),t(".saveable").entwine({onmatch:function(){this._super();var t,n=this.data("settings-key");"undefined"!=typeof i[n]&&(t=i[n],this.is(":checkbox")?this.prop("checked",t&&"false"!==t):this.val(t),this.change())},onchange:function(){var t,n=this.data("settings-key");"undefined"!=typeof i[n]&&(t=i[n],i[n]=this.is(":checkbox")?this.prop("checked"):this.val(),i.save()),this._super()}}),t("#admin-frame").entwine({onmatch:function(){this.load(function(){var i=t(this)[0].contentWindow,e=i.jQuery;e("#preview-mode-dropdown-in-content").entwine({onmatch:function(){this.remove()}}),e(".logout-link").attr("target","_top"),e("form").each(function(){var i=t(this).attr("action");t(this).attr("action",n(i))}),e("div.cms-container").entwine({onbeforestatechange:function(t,i){i.state.url=n(i.state.url)}})})}}),t("<div>").addClass("admin-panel admin-menu-hide").appendTo(t("body"))})})}(jQuery);