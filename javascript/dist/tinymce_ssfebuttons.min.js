!function(e){tinymce.PluginManager.add("SSFEButtons",function(t){function n(){o()?t.windowManager.open({title:"Insert link",url:frontEndAdmin.linkURL,autoScroll:!0,width:700,height:500,classes:"frontend-editable-dialog"}):t.windowManager.alert("Please make a selection to insert a link")}function i(){t.windowManager.open({title:"Insert/edit image",url:frontEndAdmin.mediaURL,autoScroll:!0,width:700,height:500,classes:"frontend-editable-dialog"})}function o(){return!t.selection.isCollapsed()||"A"===t.selection.getNode().nodeName}function a(){var e=this;e.disabled(!o()),t.on("SelectionChange",function(){e.disabled(!o())})}t.addShortcut("Ctrl+K","",n),t.addCommand("ssfelink",n),t.addButton("ssfeLink",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",stateSelector:"a[href]",onclick:n,onPostRender:a}),t.addMenuItem("ssfeLink",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:n,stateSelector:"a[href]",context:"insert",prependToContext:!0,onPostRender:a}),t.addButton("ssfeimage",{icon:"image",tooltip:"Insert/edit image",onclick:i,stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"}),t.addMenuItem("ssfeimage",{icon:"image",text:"Insert image",onclick:i,context:"insert",prependToContext:!0});var s=/(.?)\[embed(.*?)\](.+?)\[\/\s*embed\s*\](.?)/gi;t.on("BeforeSetContent",function(t){for(var n,i,o,a,l,d,r,c,m,f,g=null,u=t.content;g=s.exec(u);)if(n=g[1],i=g[4],"["!==n||"]"!==i){o={},a=g[2].replace(/['"]/g,"").replace(/(^\s+|\s+$)/g,""),d=a.split(/\s+/);for(c in d)d.hasOwnProperty(c)&&(r=d[c].split("="),o[r[0]]=1===r.length?r[0]:r[1]);o.cssclass=o["class"],l=g[3],m=e("<img/>").attr({src:o.thumbnail,width:o.width,height:o.height,"class":o.cssclass,"data-url":l}).addClass("ss-htmleditorfield-file embed");for(f in o)m.attr("data-"+f,o[f]);u=u.replace(g[0],n+e("<div/>").append(m).html()+i)}t.content=u})})}(jQuery);